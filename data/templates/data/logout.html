{% extends 'data/base.html' %}
{% block title %}Sign out{% endblock %}
{% block body %}
    <div class="container">
        <div class="form-group row" id="success" style="display: none;">
            <div class="alert alert-success" id="successMessage">
                You have successfully logged out.
            </div>
        </div>
        <div class="form-group row" id="warning" style="display: none;">
            <div class="alert alert-danger" id="warningMessage">

            </div>
        </div>
        <form class="form" method="POST" id="theForm">
            {% csrf_token %}
            <button type="submit"></button>
        </form>
    </div>
    <script>
        {#var endpoint = {% url 'logout' %};#}
        {#var warningDiv = document.getElementById("warning");#}
        {#var warningMessage = document.getElementById("warningMessage");#}
        {#var successDiv = document.getElementById("success");#}
        {#var successMessage = document.getElementById("successMessage");#}
            {#var csrftoken = $.cookie('csrftoken');#}
        $(document).ready( function() {
            document.forms["theForm"].submit();
        });
        {##}
        {#$.ajax({#}
        {#    method: "POST",#}
        {#    url: endpoint,#}
        {#    data: {#}
        {#        'csrfmiddlewaretoken': '{{ csrf_token }}'#}
        {#    },#}
        {#    dataType: "json",#}
        {#    success: function (message) {#}
        {#        console.log('success');#}
        {#        if (message['verified'] === true) {#}
        {#            warningDiv.style.display = "none";#}
        {#            successDiv.style.display = "block";#}
        {#            successMessage.innerHTML = message['Message'];#}
        {#        } else {#}
        {#            warningDiv.style.display = "block";#}
        {#            successDiv.style.display = "none";#}
        {#            warningMessage.innerHTML = message['Message'];#}
        {#        }#}
        {#    },#}
        {#    error: function (error) {#}
        {#        console.log('error');#}
        {#        warningDiv.style.display = "block";#}
        {#        successDiv.style.display = "none";#}
        {#        warningMessage.innerHTML = error[0];#}
        {#    }#}
        {# });#}
    </script>
{% endblock %}